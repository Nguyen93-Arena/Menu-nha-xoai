<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Nh√† Xo√†i</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    <style>
        /* Thi·∫øt l·∫≠p font Inter v√† c√°c ki·ªÉu d√°ng c∆° b·∫£n */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc; /* M√†u n·ªÅn nh·∫π nh√†ng */
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 1rem; /* Padding t·ªïng th·ªÉ cho n·ªôi dung */
        }
        /* √Åp d·ª•ng font Montserrat cho ti√™u ƒë·ªÅ Menu Nh√† Xo√†i */
        .cafe-nha-xoai-title {
            font-family: 'Montserrat', sans-serif;
        }
        /* ·∫®n c√°c m≈©i t√™n tƒÉng/gi·∫£m m·∫∑c ƒë·ªãnh c·ªßa input type="number" */
        input[type='number']::-webkit-inner-spin-button,
        input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type='number'] {
            -moz-appearance: textfield;
        }
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 1.5rem; /* rounded-3xl */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            max-width: 90%;
            width: 400px;
            position: relative;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-yellow-100 to-orange-200">
    <div class="max-w-md w-full bg-white rounded-3xl shadow-xl overflow-hidden my-8">
        <div class="relative bg-yellow-500 p-6 flex flex-col items-center justify-center text-white text-center rounded-t-3xl">
            <h1 class="text-4xl font-extrabold mb-2 leading-tight cafe-nha-xoai-title">
                MENU NH√Ä ü•≠ XO√ÄI ü•≠
            </h1>
            <p class="text-lg font-semibold italic">N∆°i h∆∞∆°ng v·ªã g·∫∑p g·ª° s·ª± th∆∞ th√°i</p>
        </div>

        <div class="p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b-2 border-yellow-400 pb-2 flex items-center">
                <span class="mr-2 text-3xl">‚òï</span> Th·ª©c u·ªëng gi·∫£i kh√°t
            </h2>
            <ul class="space-y-3">
                <li class="flex justify-between items-center py-2 px-3 bg-yellow-50 rounded-xl shadow-sm">
                    <span class="text-lg font-medium text-gray-700">Cafe S·ªØa</span>
                    <span class="text-lg font-semibold text-yellow-700" data-price="15000">15.000 VNƒê</span>
                </li>
                <li class="flex justify-between items-center py-2 px-3 bg-yellow-50 rounded-xl shadow-sm">
                    <span class="text-lg font-medium text-gray-700">Cafe ƒêen ƒê√°</span>
                    <span class="text-lg font-semibold text-yellow-700" data-price="12000">12.000 VNƒê</span>
                </li>
                <li class="flex justify-between items-center py-2 px-3 bg-yellow-50 rounded-xl shadow-sm">
                    <span class="text-lg font-medium text-gray-700">Tr√† Chanh</span>
                    <span class="text-lg font-semibold text-yellow-700" data-price="12000">12.000 VNƒê</span>
                </li>
                <li class="flex justify-between items-center py-2 px-3 bg-yellow-50 rounded-xl shadow-sm">
                    <span class="text-lg font-medium text-gray-700">Tr√† T·∫Øc</span>
                    <span class="text-lg font-semibold text-yellow-700" data-price="10000">10.000 VNƒê</span>
                </li>
                <li class="flex justify-between items-center py-2 px-3 bg-yellow-50 rounded-xl shadow-sm">
                    <span class="text-lg font-medium text-gray-700">S·ªØa B·∫Øp H·∫°t ƒêi·ªÅu</span>
                    <span class="text-lg font-semibold text-yellow-700" data-price="12000">12.000 VNƒê</span>
                </li>
            </ul>
        </div>

        <div class="p-6 pt-0">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b-2 border-yellow-400 pb-2 flex items-center">
                <span class="mr-2 text-3xl">ü•®</span> ƒÇn v·∫∑t
            </h2>
            <ul class="space-y-3">
                <li class="flex justify-between items-center py-2 px-3 bg-yellow-50 rounded-xl shadow-sm">
                    <span class="text-lg font-medium text-gray-700">B√°nh tr√°ng c√°c lo·∫°i</span>
                    <span class="text-lg font-semibold text-yellow-700" data-price="10000">Gi√° theo lo·∫°i (VD: 10.000 VNƒê)</span>
                </li>
            </ul>
        </div>

        <div class="p-6 pt-0">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b-2 border-yellow-400 pb-2 flex items-center">
                <span class="mr-2 text-3xl">‚ûï</span> Ch·ªçn m√≥n
            </h2>
            <div id="custom-combo-options" class="space-y-3 mb-4">
                </div>
            <div class="mt-4 p-4 bg-yellow-50 rounded-xl shadow-inner text-gray-700 text-sm italic">
                <p class="font-bold text-base mb-2">C√°c m√≥n ƒë√£ ch·ªçn:</p>
                <ul id="selected-items-list" class="list-disc list-inside space-y-1">
                    <li>Ch∆∞a c√≥ m√≥n n√†o ƒë∆∞·ª£c ch·ªçn.</li>
                </ul>
                <p class="font-bold text-base mt-2">T·ªïng c·ªông: <span id="total-price" class="text-yellow-700">0 VNƒê</span></p>
            </div>
            <button id="clear-selection-btn" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-xl focus:outline-none focus:shadow-outline transition duration-300 ease-in-out mt-4">
                X√≥a l·ª±a ch·ªçn
            </button>
        </div>

        <div class="bg-yellow-600 p-6 text-center text-white rounded-b-3xl">
            <h3 class="text-xl font-bold mb-2">üìû Li√™n h·ªá ship t·∫≠n n∆°i:</h3>
            <p class="text-2xl font-extrabold tracking-wide">0978276292</p>
            <button id="ship-now-btn" class="inline-block mt-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition duration-300 ease-in-out transform hover:scale-105">
                Ship ngay! üõµ
            </button>
            <p class="mt-4 text-sm italic">C·∫£m ∆°n b·∫°n ƒë√£ ·ªßng h·ªô Cafe Nh√† Xo√†i!</p>
        </div>
    </div>

    <div id="ship-now-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 class="text-2xl font-bold text-gray-800 mb-4 text-center">Th√¥ng tin giao h√†ng</h3>
            <div class="mb-4">
                <label for="address-input" class="block text-gray-700 text-sm font-bold mb-2">ƒê·ªãa ch·ªâ giao h√†ng:</label>
                <input type="text" id="address-input" class="shadow appearance-none border rounded-xl w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-yellow-50" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ c·ªßa b·∫°n">
            </div>
            <div class="mb-4">
                <label for="phone-input" class="block text-gray-700 text-sm font-bold mb-2">S·ªë ƒëi·ªán tho·∫°i c·ªßa b·∫°n:</label>
                <input type="tel" id="phone-input" class="shadow appearance-none border rounded-xl w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-yellow-50" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i c·ªßa b·∫°n">
            </div>
            <div class="mb-4 p-3 bg-yellow-50 rounded-xl shadow-inner">
                <p class="font-bold text-base mb-2">ƒê∆°n h√†ng c·ªßa b·∫°n:</p>
                <ul id="order-summary-list" class="list-disc list-inside space-y-1 text-sm text-gray-700">
                    <li>Ch∆∞a c√≥ m√≥n n√†o ƒë∆∞·ª£c ch·ªçn.</li>
                </ul>
                <p class="font-bold text-base mt-2">T·ªïng ti·ªÅn: <span id="order-summary-total" class="text-yellow-700">0 VNƒê</span></p>
            </div>
            <div class="flex justify-between space-x-2">
                <button id="send-order-btn" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-xl focus:outline-none focus:shadow-outline transition duration-300 ease-in-out">
                    G·ª≠i ƒë∆°n h√†ng qua Zalo
                </button>
                <button id="close-modal-btn" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-xl focus:outline-none focus:shadow-outline transition duration-300 ease-in-out">
                    ƒê√≥ng
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menuItemsData = [
                { name: "Cafe S·ªØa", price: 15000 },
                { name: "Cafe ƒêen ƒê√°", price: 12000 },
                { name: "Tr√† Chanh", price: 12000 },
                { name: "Tr√† T·∫Øc", price: 10000 },
                { name: "S·ªØa B·∫Øp H·∫°t ƒêi·ªÅu", price: 12000 },
                { name: "B√°nh tr√°ng c√°c lo·∫°i", price: 10000 } // Gi√° m·∫∑c ƒë·ªãnh cho b√°nh tr√°ng
            ];

            const customComboOptionsDiv = document.getElementById('custom-combo-options');
            const selectedItemsList = document.getElementById('selected-items-list');
            const totalPriceSpan = document.getElementById('total-price');
            const clearSelectionBtn = document.getElementById('clear-selection-btn');

            // Modal elements
            const shipNowBtn = document.getElementById('ship-now-btn');
            const shipNowModal = document.getElementById('ship-now-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const addressInput = document.getElementById('address-input');
            const phoneInput = document.getElementById('phone-input');
            const orderSummaryList = document.getElementById('order-summary-list');
            const orderSummaryTotal = document.getElementById('order-summary-total');
            const sendOrderBtn = document.getElementById('send-order-btn');

            const shopPhoneNumber = '0978276292'; // S·ªë ƒëi·ªán tho·∫°i c·ªßa qu√°n ƒë·ªÉ g·ª≠i Zalo

            // Render checkboxes and quantity inputs for custom combo
            menuItemsData.forEach(item => {
                const div = document.createElement('div');
                div.className = 'flex items-center justify-between py-2 px-3 bg-yellow-50 rounded-xl shadow-sm';
                div.innerHTML = `
                    <div class="flex items-center">
                        <input type="checkbox" id="item-${item.name.replace(/\s/g, '-')}" name="combo-item" value="${item.name}" data-price="${item.price}" class="h-4 w-4 text-yellow-600 focus:ring-yellow-500 border-gray-300 rounded">
                        <label for="item-${item.name.replace(/\s/g, '-')}" class="ml-2 text-gray-700 text-lg font-medium">${item.name}</label>
                    </div>
                    <div class="flex items-center space-x-2">
                        <input type="number" id="qty-${item.name.replace(/\s/g, '-')}" class="w-16 p-1 border border-gray-300 rounded-md text-center text-gray-700" value="0" min="0">
                        <span class="text-lg font-semibold text-yellow-700">${item.price.toLocaleString('vi-VN')} VNƒê</span>
                    </div>
                `;
                customComboOptionsDiv.appendChild(div);
            });

            // Function to update selected items and total price
            function updateCustomCombo() {
                let total = 0;
                selectedItemsList.innerHTML = ''; // Clear previous list
                let itemsSelectedCount = 0;
                const currentOrderItems = []; // To store items for modal summary

                menuItemsData.forEach(item => {
                    const checkbox = document.getElementById(`item-${item.name.replace(/\s/g, '-')}`);
                    const quantityInput = document.getElementById(`qty-${item.name.replace(/\s/g, '-')}`);

                    if (checkbox.checked) {
                        const quantity = parseInt(quantityInput.value);
                        if (quantity > 0) {
                            const itemTotal = item.price * quantity;
                            total += itemTotal;

                            const li = document.createElement('li');
                            li.textContent = `${item.name} x ${quantity} (${itemTotal.toLocaleString('vi-VN')} VNƒê)`;
                            selectedItemsList.appendChild(li);
                            currentOrderItems.push({ name: item.name, quantity: quantity, total: itemTotal });
                            itemsSelectedCount++;
                        } else {
                            // If checkbox is checked but quantity is 0, uncheck it
                            checkbox.checked = false;
                        }
                    } else {
                        // If checkbox is unchecked, ensure quantity is 0
                        quantityInput.value = 0;
                    }
                });

                if (itemsSelectedCount === 0) {
                    selectedItemsList.innerHTML = '<li>Ch∆∞a c√≥ m√≥n n√†o ƒë∆∞·ª£c ch·ªçn.</li>';
                }
                totalPriceSpan.textContent = `${total.toLocaleString('vi-VN')} VNƒê`;

                // Update modal summary
                orderSummaryList.innerHTML = '';
                if (currentOrderItems.length === 0) {
                    orderSummaryList.innerHTML = '<li>Ch∆∞a c√≥ m√≥n n√†o ƒë∆∞·ª£c ch·ªçn.</li>';
                } else {
                    currentOrderItems.forEach(item => {
                        const li = document.createElement('li');
                        li.textContent = `${item.name} x ${item.quantity} (${item.total.toLocaleString('vi-VN')} VNƒê)`;
                        orderSummaryList.appendChild(li);
                    });
                }
                orderSummaryTotal.textContent = `${total.toLocaleString('vi-VN')} VNƒê`;
            }

            // Add event listeners to all checkboxes and quantity inputs
            menuItemsData.forEach(item => {
                const checkbox = document.getElementById(`item-${item.name.replace(/\s/g, '-')}`);
                const quantityInput = document.getElementById(`qty-${item.name.replace(/\s/g, '-')}`);

                checkbox.addEventListener('change', () => {
                    if (checkbox.checked && parseInt(quantityInput.value) === 0) {
                        quantityInput.value = 1;
                    } else if (!checkbox.checked) {
                        quantityInput.value = 0;
                    }
                    updateCustomCombo();
                });

                quantityInput.addEventListener('change', () => {
                    if (parseInt(quantityInput.value) < 0) {
                        quantityInput.value = 0;
                    }
                    if (parseInt(quantityInput.value) > 0) {
                        checkbox.checked = true;
                    } else {
                        checkbox.checked = false;
                    }
                    updateCustomCombo();
                });

                quantityInput.addEventListener('input', () => {
                    if (parseInt(quantityInput.value) < 0) {
                        quantityInput.value = 0;
                    }
                    if (parseInt(quantityInput.value) > 0) {
                        checkbox.checked = true;
                    } else {
                        checkbox.checked = false;
                    }
                    updateCustomCombo();
                });
            });

            // Event listener for clear selection button
            clearSelectionBtn.addEventListener('click', () => {
                document.querySelectorAll('input[name="combo-item"]').forEach(checkbox => {
                    checkbox.checked = false;
                    const quantityInput = document.getElementById(`qty-${checkbox.value.replace(/\s/g, '-')}`);
                    if (quantityInput) {
                        quantityInput.value = 0;
                    }
                });
                updateCustomCombo(); // Update display after clearing
            });

            // Event listener for Ship Now button (to open modal)
            shipNowBtn.addEventListener('click', () => {
                shipNowModal.classList.remove('hidden');
                updateCustomCombo(); // Ensure summary in modal is up-to-date
            });

            // Event listener for Close Modal button
            closeModalBtn.addEventListener('click', () => {
                shipNowModal.classList.add('hidden');
            });

            // Event listener for Send Order button (in modal)
            sendOrderBtn.addEventListener('click', () => {
                const address = addressInput.value.trim();
                const customerPhone = phoneInput.value.trim();
                const selectedItems = [];
                let totalOrderPrice = 0;

                menuItemsData.forEach(item => {
                    const checkbox = document.getElementById(`item-${item.name.replace(/\s/g, '-')}`);
                    const quantityInput = document.getElementById(`qty-${item.name.replace(/\s/g, '-')}`);
                    if (checkbox.checked && parseInt(quantityInput.value) > 0) {
                        const quantity = parseInt(quantityInput.value);
                        const itemTotal = item.price * quantity;
                        selectedItems.push(`${item.name} x ${quantity} (${itemTotal.toLocaleString('vi-VN')} VNƒê)`);
                        totalOrderPrice += itemTotal;
                    }
                });

                if (!address || !customerPhone) {
                    // Using a custom message box instead of alert
                    alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß ƒë·ªãa ch·ªâ v√† s·ªë ƒëi·ªán tho·∫°i c·ªßa b·∫°n!');
                    return;
                }
                if (selectedItems.length === 0) {
                    // Using a custom message box instead of alert
                    alert('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt m√≥n ƒë·ªÉ ƒë·∫∑t h√†ng!');
                    return;
                }

                let orderMessage = `ƒê∆†N H√ÄNG M·ªöI T·ª™ MENU NH√Ä XO√ÄI:\n\n`;
                orderMessage += `C√°c m√≥n ƒë√£ ch·ªçn:\n`;
                selectedItems.forEach(item => {
                    orderMessage += `- ${item}\n`;
                });
                orderMessage += `\nT·ªïng ti·ªÅn: ${totalOrderPrice.toLocaleString('vi-VN')} VNƒê\n`;
                orderMessage += `ƒê·ªãa ch·ªâ giao h√†ng: ${address}\n`;
                orderMessage += `S·ªë ƒëi·ªán tho·∫°i kh√°ch: ${customerPhone}\n\n`;
                orderMessage += `Vui l√≤ng x√°c nh·∫≠n ƒë∆°n h√†ng!`;

                // Encode the message for URL
                const encodedMessage = encodeURIComponent(orderMessage);

                // Zalo deep link (this will attempt to open Zalo app)
                // Note: The success of Zalo deep links can vary depending on device and Zalo app version.
                const zaloUrl = `https://zalo.me/${shopPhoneNumber}?text=${encodedMessage}`;
                
                // Open Zalo link in a new tab/window
                window.open(zaloUrl, '_blank');

                // Optionally clear selection and close modal after sending
                clearSelectionBtn.click(); // Simulate click to clear selection
                shipNowModal.classList.add('hidden');
            });

            // Initial update
            updateCustomCombo();
        });
    </script>
</body>
</html>
